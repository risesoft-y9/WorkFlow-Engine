## v9.6.9 2026-02-03

### Added

- 流程部署列表添加绑定事项列、新增事项的绑定流程排除已经绑定的流程
- 添加角色名称配置
- 增加意见框、按钮配置和数据字典json文件的导入导出
- 增加视图配置和动态角色json文件的导入导出

### Changed

- 表单设计添加字段绑定标题，编号，紧急程度，获取标题内容根据绑定字段获取
- 在办查询GROUP BY改为窗口函数ROW_NUMBER()
- logback替换log4j2
- 移除多余jar包引用以及jodd.util.Base64-》java.util.Base64
- 正式环境的配置移除了绝对路径改用相对路径
- 整体功能优化改造、细化及调整包路径

### Fixed

- 特定配置文件配置属性覆盖默认配置属性
- 保存字段角色权限增加手机端的判断
- 重新调整数据监听和初始化逻辑，处理生成默认租户不能监听到租户租用系统的消息的问题

### Dependency Upgrades

- Upgrade to flowable 6.8.1

## v9.6.8 2025-06-27

### Added

- 添加获取有权限的启动用户任务节点的接口
- 新增一键复制绑定
- 根据表单id清空绑定字段
- 新增纸质附件功能
- 新增电子附件功能
- 待办列表添加processDefinitionId
- 表单初始化数据添加委办局字段
- 新增会签功能
- 节点类型添加CallActivity
- 新增红绿灯逻辑
- 添加动态角色会签部门秘书及发送获取数据
- 添加委外会签单位
- 增加对部门属性可继承的支持
- 增加计算日期的天数接口
- 添加发文正文组件，正文组件权限配置，正文上传保存，历史版本显示
- 待办列表添加催办状态
- 添加发文排版信息
- 添加自定义视图功能
- 监控所有在办件添加会签流程信息和催办信息
- 监控所有办结件添加会签流程信息和催办信息
- 监控所有回收站添加状态信息
- 单人节点，添加是否是抢占式签收任务属性

### Changed

- 初始化路由配置时,使用真实的任务节点名称。
- 添加y9itemadmin模块，将短信提醒，消息提醒，统一待办，数据中心接口从开源模块移除
- 根据传入的开始节点起草
- 业务表字段类型添加double,float;表单数据保存数值类型优化处理
- 添加防抖函数
- 调整按钮排序，优化按钮代码逻辑
- 点击保存按钮时，如果没有启动流程，直接启动流程。
- 子流程节点添加【子】标识
- 标题表单非必填
- 办结按钮根据流程图上的线或者结束按钮名称确定
- 添加获取子流程父节点接口
- 添加根据流程实例id和执行id获取历史节点实例接口
- 发送岗位显示部门架构，选人数据添加节点类型
- 发送生成流水号
- 移除链接配置相关
- 流转信息保存委办局信息
- 签收后，不可退回，只能退签
- 子流程办结时，主流程的办理人改为参数传递
- 处理主办历程和会签子流程历程
- 所有人的历史件去重并按照开始时间排序
- 完善历程任务状态
- 调整状态栏图标的逻辑
- 退回按钮应该根据办理人是否一致去重显示
- 扩展动态角色：当前部门领导，如果当前人是部门领导，则找当前部门所在委办局下的其他部门的领导，当前部门的主管领导，如果当前人主管领导，则排除自己
- 表单字段权限绑定时，获取最新的流程定义节点进行绑定
- +签收或者退签时，只获取待办按钮数据。
- 优化部门秘书，当前部门未设置秘书，则向上找直至委办局，如果委办局未设置，则返回空
- 获取主办司局（取组织下的为委办局的部门）
- 适配待办的多表单字段查询
- 流转信息添加字段，用于根据节点查询待办
- 流程参数表添加主办部门名称和主办部门id
- 限时督办接口
- 根据任务节点获取待办接口
- 优化会签子流程结束列表描述
- 添加获取事项绑定的表单，根据formId获取表单字段接口
- 动态角色优化：秘书、主管领导这种和局相关的设置到局上就可以
- 子流程节点，只更新对应子流程的taskSenderId,taskSender任务变量
- 打开待办设为已读状态
- 办结件移除特殊按钮
- 根据流程序列号获取绑定的所有表数据
- 优化删除副本以及取消副本
- 同步办结数据修改

### Fixed

- 表字段生成的xml添加runOnChange="true"属性，添加tableExists判断
- 表单数据保存处理布尔类型
- 我的用户组排除禁用岗位
- 修复子流程重定位
- 意见框bug修改
- 解决SubProcess子流程办结问题
- 会签详情没签字的情况下办结，设置为退回办结
- 处理发送至抢占式办理页面，还未签收时，收回后，再次送抢占式办理会出现丢件的情况。
- 一个表单绑定多个表时，保存数据失败
- 根据任务节点和表单字段查询
- 会签时，一个子流程退回时影响其他子流程退回状态的问题
- 监控在办件根据表单字段查询
- 监控办结件根据表单字段查询
- 签收任务的取回问题

### Documentation

- 修改 README.md
- 添加接口安全控制使用文档

### Dependency Upgrades

- 修改vue工程依赖插件的版本
- 升级 vite版本
- 升级jodconverter版本至4.4.0，jodconverter-local升级-》4.4.8

## v9.6.7 2024-10-12

### Added

- 添加节点绑定链接功能
- 添加子表单数据保存和获取
- 办件信息添加target字段，添加target流程变量，列表添加target字段查询
- 新增获取角色人员接口
- 流程变量表添加target字段
- 接口参数添加是否文件类型字段
- 接口管理添加文件类型，接口响应处理文件类型
- 添加任务节点最短时长，超长打断配置
- 支持传统的外部 servlet 容器部署 && 内嵌 tomcat 的可执行 war
- 添加判断流程定义节点是否是SubProcess节点接口，子流程办结不更新历程信息
- 添加根据流程编号获取办件信息接口
- 消息提醒，数据中心，统一待办删除添加开关
- 接口调用添加开关和类型
- 添加抄送件存数据库接口

### Changed

- 恢复待办问题修改
- 结束时间处理
- 兼容人员和岗位，通过OrgUnitApi获取人员或岗位。
- 接口重命名，去掉岗位相关的类包
- 获取事项系统列表，根据系统名称获取待办列表和正在运行实例列表
- 统一 Java 版本；移除重复引入的配置（已从父 pom.xml 继承）
- 延时截转办结数据
- 引入 flatten-maven-plugin 展平 pom.xml（占位符的替换、简化pom、计算依赖的版本等）
- 状态为已办结时，时间按办结时间排序
- 使用 spring profile 代替 maven profile 多环境配置
- server.intranet.ip -> y9.internalIp
- Elasticsearch统一使用ElasticsearchOperations查询
- 并行任务调用接口保存子表数据，并行任务自动完成
- 优化获取流程节点信息_SubProcess
- 获取事项接口绑定接口修改
- 保存表单数据，增加值不为null判断
- 记录岗位名称，历程获取办理人时优先使用记录的岗位名称，增加历程岗位不存在提示
- 同步历史任务办结时间
- 生成年度表结构修改
- 优化FlowableModelConvertUtil
- 办件信息保存处理
- 同步历史任务办结时间

### Fixed

- 恢复待办系统名称设值
- 获取事项绑定表单调整，taskDefKey为空，获取流程绑定表单
- 抄送成功不提示修复
- 处理表单保存，字段值是数组问题
- 处理接口返回字段值为数组问题
- 修改工作流设计表结构不能自动生成的问题

### Documentation

- 修改README.md

## v9.6.6 2024-07-25

### Added

- 办件添加流程图展示
- 添加前置表单功能
- 事项管理添加链接管理，绑定和授权
- 流程设计和流程部署列表添加按时间排序
- 添加获取事项表单绑定接口
- 新增接口管理功能
- 事项接口绑定，任务绑定，参数绑定功能。
- 添加接口过滤器统一校验auth-tenantId、auth-userId、auth-positionId
- 意见列表添加对岗位排序
- 添加排序字段、添加事项名称模糊事项列表接口、添加事项复制功能（复制选中事项的所有绑定配置信息，不包含授权信息）
- 意见框添加一键设置功能，如：一键阅知、一键审批、一键同意等
- 实现手机端绑定多个表单功能，增加表单复制接口，用于事项的复制功能。
- 增加按钮配置复制接口，用于事项的复制功能。
- 增加接口配置复制接口，用于事项的复制功能。
- 增加链接配置复制接口，用于事项的复制功能。
- 增加编号配置复制接口，用于事项的复制功能。
- 增加任务签收配置复制接口，用于事项的复制功能。
- 增加意见框配置复制接口，用于事项的复制功能。
- 增加打印模板配置复制接口，用于事项的复制功能。
- 增加前置表单配置复制接口，用于事项的复制功能。
- 增加表单配置复制接口，用于事项的复制功能。
- 添加一键设置功能的实现接口
- 添加前置表单表的自动生成配置
- 事项正文模板绑定表增加绑定值和绑定状态字段
- 新增事项排序功能
- 添加打开抄送是否已阅参数
- 增加删除绑定信息接口
- 增加绑定值获取正文模板处理
- 增加意见框一键设置处理
- 增加正文类别字段
- 增加表字段处理信息
- 添加数据库类型

### Changed

- 流程监控列表展示内容修改
- Elasticsearch Clients由RestHighLevelClient转变成ElasticsearchClient
- 优化事项接口文档生成：完善类、方法、属性注释
- 修改路由条件判定
- 接口规范化处理，以及移除无用的接口
- 修改字眼关联文件为关联流程
- 移除基于人员流转的代码，只保留岗位流转相关代码。
- 办结截转数据，使用监听办结截转
- 修改smart-doc文档生成路径
- 修改获取流程节点返回数据
- 事项绑定正文模板表添加绑定状态和绑定值字段，并实现事项绑定多个正文模板，可根据绑定状态绑定一个默认的模板，也可根据不同绑定值绑定不同的模板。
- 事项管理添加关联流程配置，可关联其他事项流程的办件
- 添加获取当前委办局下所有的正文模板(可根据正文模板名称查询)接口
- 根据事项id和流程定义id获取事项绑定按钮的信息
- 根据委办局id和正文模板名称查询正文模板列表
- 事项定义信息表添加排序字段
- 去除事项id验证，查询全部事项的办结件
- 修改关联流程接口排序方式
- 消息提醒任务列表接口返回修改
- 修改排序规则
- 办结任务接口调整
- 处理根据流程定义Id获取节点信息异常
- 表单管理针对数据库操作的util工具类代码重构
- 获取委办局树由数据库查询改为接口查询
- 修改更新意见接口
- 修改抄送详情接口
- 加签接口参数必填修改
- 修改编号返回数据
- 复制表单同时复制手机端的绑定

### Fixed

- 修复获取事项绑定链接接口
- 修改系统中文名不变问题
- 表单名称显示问题修改
- 标注不必填参数
- 草稿箱列表获取失败
- 修复在办列表获取失败问题
- 修复历程不显示开始时间的问题
- 处理前置表单新建报错问题
- 列表综合搜索由get改成post请求，避免请求出现特殊字符导致调用失败
- 修改changelog.xml文件，将新增的表写入其中。
- 修复接口返回数据结构变化修改
- 正文标题获取报错处理
- 草稿箱等时间加上时区显示
- 处理协作状态保存失败
- 修改异常事务回滚问题
- 处理正文打开失败

## v9.6.5 2024-05-10

###Added

- 添加启动流程并发送接口
- 添加调用计算接口返回信息日志
- 添加对外接口
- 添加收发文角色权限
- 添加动态角色

### Changed

- 流程图xml转换byte时，使用UTF-8编码
- 哺乳假请假时长计算方式修改
- 发送接口添加选择的路由
- 表单数据map改为key不区分大小写的map
- 绑定字段不传值空指针的问题
- 删除dzxh相关配置
- 添加图像计算系统的地址,用于执行监听器中调用对方的接口
- 完善执行监听器中调用图像计算和发布的接口
- 修改流程启动接口
- 删除流程实例改为彻底删除
- 修改Bpmn导入接口

## v9.6.4 2024-03-13

###Added

- 增加流程图展示

### Changed

- feign client 兼容注册中心和直连方式，本地默认使用IP端口直连
- 拆分 risenet-y9boot-rest-interface 到各个模块中，规范 api 模块命名
- 统一包名
- 重定向按钮显示调整
- 完善租户租用流程管理时的表结构初始化提示信息。
- 删除无用注释字段、无用代码和配置
- 子表单前端多选框组件数据保存失败问题修复
- 收回到起草节点，起草人可删除该件

## v9.6.3 2024-02-19

###Added

- bpmn流程设计添加保存，获取方法
- 新增快捷发送功能
- 新增综合查询功能
- 调整出差委托功能
- 常用语添加使用次数排序，增加手机端获取表单初始化数据接口
- 添加动态角色
- 新增附件打包zip下载功能
- 添加“提交”按钮相关方法
- 增加路由表达式解析
- 添加计算天数接口，添加办结销假
- 统一待办添加根据紧急程度排序接口，添加上会功能
- 添加并行节点可以抢占式办理
- 表单设计添加正文组件，人员树选择组件
- 消息提醒添加开关配置
- 手机端岗位接口，添加待办数量和委托岗位获取
- 列表添加类型搜索
- 增加正文接口
- 添加移动端特殊办结接口
- 增加Kingbase数据库适配

### Changed

- 调整租户数据源
- 删除无用代码和文件
- pdf预览bug解决，新增打印等按钮
- 处理Y9Result和Y9Page，去掉new操作
- 修改查询字段问题
- 解决linux系统下，无法转换docx-》pdf；解决低版本浏览器无法预览pdf
- 移除不再使用的依赖 risenet-y9boot-starter-dbComment
- 租户租用系统会发送事件到中间件，应用可监听做对应租户的初始化的工作
- 解决开始节点未绑定角色时报错的问题
- 角色代码优化
- 优化编号功能调整
- 业务代码从 controller 移至 service 中
- 成的租户数据不使用固定ID
- 升级最新版 smart-doc，修复生成的文档不全的问题
- 接口整理，添加注释
- 历程时间调整
- v1 数字底座接口，Y9Result 包装接口返回;将源码根据该改动进行调整
- 目标路由为1时直接返回
- 表单绑定关系复制bug
- 字段权限优化
- 提交前设置表单字段至流程变量
- 打开在办件时，流程启动人添加“特殊办结”按钮
- 事项添加事项管理员，管理员可查看监控列表
- 移除“代录意见”相关字段
- 表单字段权限优化
- 添加流程定义节点名称realTaskDefName，taskDefName有可能是线上的名字
- 初始化数据添加职务获取
- 使用 Enum 替换一些变量值仅在一个固定范围内变化的类型，包括接口参数和实体字段类型
- 意见框复制上个版本的配置时，加上复制意见框必填的属性
- 解决压缩文件、浏览器兼容模式无法预览问题
- 草稿添加根据系统名称获取列表，关注添加系统名称字段，意见添加签名字段
- 表单初始化数据添加岗位所在部门领导
- 我的关注添加上会标识，修改bug
- 收回可修改上一次意见，关联文件关联本事项所有件
- 多租户系统 risenet-y9boot-starter-liquibase -> risenet-y9boot-starter-multi-tenant
- 修复手机端退回bug修改
- 优化岗位字段
- 关联文件修改
- 添加我的传阅列表接口，附件修改留痕，待办件加减签，新建隐藏打印按钮
- 修改日期格式
- 修改发送选人排序问题
- 抄送用户组bug修复，正文控件留痕不显示用户名
- 手机端获取事项绑定意见框数据调整
- 当前岗位所在的部门下面的岗位集合（排除当前岗位）
- 字段类型修改，适配kingbase
- 流程没启动的情况下，改为获取当前岗位的部门领导、主管领导
- 加减签修改，计算天数接口修改
- 手机端抄送接口修改
- 增加正文接口
- 个人所有件添加日期搜索，正文调整
- 手机端意见bug修复
- 增加获取表单绑定字段列表
- 手机端接口升级，使用Y9Result,Y9Page返回，并修改接口名称
- 添加手机端发送选人搜索接口
- 所有模块命名统一为小写
- 同步生成年份表时，判断年份表是否存在，不存在才生成年份表。
- 修改Dockerfile 改为通用写法
- 移除非必要的依赖
